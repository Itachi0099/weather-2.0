<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Weather Assistant - Your Smart Weather Companion</title>
    <meta name="description" content="AI-powered weather app with voice commands, personalized insights, and advanced forecasting">
    <meta name="theme-color" content="#0984e3">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå§Ô∏è</text></svg>">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Leaflet Maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Theme Toggle -->
    <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme">
        <i class="fas fa-moon"></i>
    </button>

    <!-- Voice Assistant Button -->
    <button id="voiceBtn" class="voice-btn" aria-label="Voice Assistant">
        <i class="fas fa-microphone"></i>
        <span class="voice-indicator"></span>
    </button>

    <!-- Main App Container -->
    <div class="app-container">
        <!-- Navigation -->
        <nav class="navigation">
            <div class="nav-brand">
                <i class="fas fa-cloud-sun"></i>
                <span>WeatherAI</span>
            </div>
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="current">Current</button>
                <button class="nav-tab" data-tab="forecast">Forecast</button>
                <button class="nav-tab" data-tab="map">Map</button>
                <button class="nav-tab" data-tab="ai">AI Insights</button>
            </div>
            <button class="settings-btn" id="settingsBtn">
                <i class="fas fa-cog"></i>
            </button>
        </nav>

        <!-- Search Section -->
        <section class="search-section">
            <div class="search-container">
                <div class="search-input-wrapper">
                    <i class="fas fa-search"></i>
                    <input type="text" id="cityInput" placeholder="Search cities, countries, or ask AI..." autocomplete="off">
                    <div id="searchSuggestions" class="search-suggestions hidden"></div>
                </div>
                <button id="searchBtn" class="search-btn">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            <div class="quick-actions">
                <button id="locationBtn" class="action-btn">
                    <i class="fas fa-location-crosshairs"></i>
                    My Location
                </button>
                <button id="favoriteBtn" class="action-btn" title="Add to favorites">
                    <i class="far fa-heart"></i>
                </button>
                <button id="shareBtn" class="action-btn" title="Share weather">
                    <i class="fas fa-share"></i>
                </button>
            </div>
        </section>

        <!-- Tab Content -->
        <main class="main-content">
            <!-- Current Weather Tab -->
            <div id="currentTab" class="tab-content active">
                <!-- Loading States -->
                <div id="loading" class="loading-state hidden">
                    <div class="loading-animation">
                        <div class="weather-loader">
                            <div class="cloud"></div>
                            <div class="rain"></div>
                        </div>
                    </div>
                    <p class="loading-text">Gathering weather intelligence...</p>
                </div>

                <!-- Current Weather Card -->
                <div id="currentWeather" class="weather-card hidden">
                    <div class="weather-header">
                        <div class="location-info">
                            <h2 id="cityName">Loading...</h2>
                            <div class="location-meta">
                                <span id="coordinates" class="coordinates"></span>
                                <span id="lastUpdate" class="last-update"></span>
                            </div>
                        </div>
                        <div class="weather-status">
                            <div id="airQualityBadge" class="air-quality-badge hidden">
                                <span class="aqi-value"></span>
                                <span class="aqi-label"></span>
                            </div>
                        </div>
                    </div>

                    <div class="current-conditions">
                        <div class="temperature-section">
                            <div class="main-temp">
                                <span id="temperature">--</span>
                                <span class="temp-unit">¬∞C</span>
                            </div>
                            <div class="temp-range">
                                <span id="highTemp">--¬∞</span> / <span id="lowTemp">--¬∞</span>
                            </div>
                            <div class="feels-like">
                                Feels like <span id="feelsLike">--¬∞</span>
                            </div>
                        </div>
                        <div class="weather-visual">
                            <div class="weather-icon-container">
                                <img id="weatherIcon" src="" alt="Weather condition" class="weather-icon">
                                <div class="weather-animation" id="weatherAnimation"></div>
                            </div>
                            <div class="condition-text">
                                <div id="condition" class="condition-main">--</div>
                                <div id="description" class="condition-desc">--</div>
                            </div>
                        </div>
                    </div>

                    <!-- Weather Details Grid -->
                    <div class="weather-details-grid">
                        <div class="detail-card">
                            <i class="fas fa-eye"></i>
                            <div class="detail-content">
                                <span class="detail-label">Visibility</span>
                                <span id="visibility" class="detail-value">-- km</span>
                            </div>
                        </div>
                        <div class="detail-card">
                            <i class="fas fa-tint"></i>
                            <div class="detail-content">
                                <span class="detail-label">Humidity</span>
                                <span id="humidity" class="detail-value">--%</span>
                            </div>
                        </div>
                        <div class="detail-card">
                            <i class="fas fa-wind"></i>
                            <div class="detail-content">
                                <span class="detail-label">Wind</span>
                                <span id="windSpeed" class="detail-value">-- km/h</span>
                                <span id="windDirection" class="detail-sub">--</span>
                            </div>
                        </div>
                        <div class="detail-card">
                            <i class="fas fa-thermometer-half"></i>
                            <div class="detail-content">
                                <span class="detail-label">Pressure</span>
                                <span id="pressure" class="detail-value">-- hPa</span>
                            </div>
                        </div>
                        <div class="detail-card">
                            <i class="fas fa-sun"></i>
                            <div class="detail-content">
                                <span class="detail-label">UV Index</span>
                                <span id="uvIndex" class="detail-value">--</span>
                                <span id="uvDescription" class="detail-sub">--</span>
                            </div>
                        </div>
                        <div class="detail-card">
                            <i class="fas fa-cloud-rain"></i>
                            <div class="detail-content">
                                <span class="detail-label">Precipitation</span>
                                <span id="precipitation" class="detail-value">-- mm</span>
                            </div>
                        </div>
                    </div>

                    <!-- Hourly Forecast Slider -->
                    <div class="hourly-forecast">
                        <h3>24-Hour Forecast</h3>
                        <div id="hourlyContainer" class="hourly-slider">
                            <!-- Hourly items will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Forecast Tab -->
            <div id="forecastTab" class="tab-content">
                <div class="forecast-container">
                    <div class="forecast-header">
                        <h3>7-Day Forecast</h3>
                        <div class="forecast-chart-toggle">
                            <button class="chart-toggle active" data-chart="temperature">
                                <i class="fas fa-thermometer-half"></i> Temperature
                            </button>
                            <button class="chart-toggle" data-chart="precipitation">
                                <i class="fas fa-cloud-rain"></i> Precipitation
                            </button>
                        </div>
                    </div>
                    
                    <!-- Chart Container -->
                    <div class="chart-container">
                        <canvas id="forecastChart"></canvas>
                    </div>
                    
                    <!-- Daily Forecast Cards -->
                    <div id="dailyForecast" class="daily-forecast">
                        <!-- Daily forecast items will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Map Tab -->
            <div id="mapTab" class="tab-content">
                <div class="map-container">
                    <div class="map-controls">
                        <div class="map-layers">
                            <button class="layer-btn active" data-layer="temperature">
                                <i class="fas fa-thermometer-half"></i> Temperature
                            </button>
                            <button class="layer-btn" data-layer="precipitation">
                                <i class="fas fa-cloud-rain"></i> Precipitation
                            </button>
                            <button class="layer-btn" data-layer="wind">
                                <i class="fas fa-wind"></i> Wind
                            </button>
                            <button class="layer-btn" data-layer="clouds">
                                <i class="fas fa-cloud"></i> Clouds
                            </button>
                        </div>
                    </div>
                    <div id="weatherMap" class="weather-map"></div>
                </div>
            </div>

            <!-- AI Insights Tab -->
            <div id="aiTab" class="tab-content">
                <div class="ai-container">
                    <div class="ai-header">
                        <div class="ai-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="ai-info">
                            <h3>Weather AI Assistant</h3>
                            <p>Get personalized insights and recommendations</p>
                        </div>
                    </div>
                    
                    <div class="ai-insights-grid">
                        <div id="clothingAdvice" class="ai-card">
                            <h4><i class="fas fa-tshirt"></i> What to Wear</h4>
                            <div class="ai-content loading">
                                <div class="ai-skeleton"></div>
                            </div>
                        </div>
                        
                        <div id="travelAdvice" class="ai-card">
                            <h4><i class="fas fa-plane"></i> Travel Tips</h4>
                            <div class="ai-content loading">
                                <div class="ai-skeleton"></div>
                            </div>
                        </div>
                        
                        <div id="healthAdvice" class="ai-card">
                            <h4><i class="fas fa-heartbeat"></i> Health Advisory</h4>
                            <div class="ai-content loading">
                                <div class="ai-skeleton"></div>
                            </div>
                        </div>
                        
                        <div id="activitySuggestions" class="ai-card">
                            <h4><i class="fas fa-running"></i> Activity Suggestions</h4>
                            <div class="ai-content loading">
                                <div class="ai-skeleton"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- AI Chat Interface -->
                    <div class="ai-chat">
                        <div class="chat-header">
                            <h4>Ask the Weather AI</h4>
                        </div>
                        <div id="chatMessages" class="chat-messages">
                            <div class="chat-message assistant">
                                <div class="message-avatar">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="message-content">
                                    <p>Hi! I'm your weather AI assistant. Ask me anything about the weather, and I'll provide personalized insights!</p>
                                </div>
                            </div>
                        </div>
                        <div class="chat-input-container">
                            <div class="chat-input-wrapper">
                                <input type="text" id="chatInput" placeholder="Ask about weather, clothing, activities..." disabled>
                                <button id="chatSend" class="chat-send-btn" disabled>
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Favorites Sidebar -->
        <div id="favoritesSidebar" class="favorites-sidebar hidden">
            <div class="sidebar-header">
                <h3>Favorite Locations</h3>
                <button id="closeFavorites" class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="favoritesList" class="favorites-list">
                <div class="no-favorites">
                    <i class="far fa-heart"></i>
                    <p>No favorite locations yet</p>
                    <small>Tap the heart icon to add current location</small>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Settings</h3>
                    <button id="closeSettings" class="close-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="settings-section">
                        <h4>Units</h4>
                        <div class="setting-item">
                            <label>Temperature</label>
                            <select id="tempUnit">
                                <option value="celsius">Celsius (¬∞C)</option>
                                <option value="fahrenheit">Fahrenheit (¬∞F)</option>
                                <option value="kelvin">Kelvin (K)</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label>Wind Speed</label>
                            <select id="windUnit">
                                <option value="kmh">km/h</option>
                                <option value="mph">mph</option>
                                <option value="ms">m/s</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h4>Notifications</h4>
                        <div class="setting-item">
                            <label>Weather Alerts</label>
                            <input type="checkbox" id="alertsEnabled" checked>
                        </div>
                        <div class="setting-item">
                            <label>Daily Summary</label>
                            <input type="checkbox" id="dailySummaryEnabled">
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h4>AI Features</h4>
                        <div class="setting-item">
                            <label>Voice Commands</label>
                            <input type="checkbox" id="voiceEnabled" checked>
                        </div>
                        <div class="setting-item">
                            <label>Auto Insights</label>
                            <input type="checkbox" id="autoInsightsEnabled" checked>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Error Toast -->
        <div id="errorToast" class="toast error hidden">
            <div class="toast-content">
                <i class="fas fa-exclamation-circle"></i>
                <span id="errorText">An error occurred</span>
            </div>
            <button id="dismissError" class="toast-dismiss">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- Success Toast -->
        <div id="successToast" class="toast success hidden">
            <div class="toast-content">
                <i class="fas fa-check-circle"></i>
                <span id="successText">Success!</span>
            </div>
        </div>

        <!-- Voice Feedback -->
        <div id="voiceFeedback" class="voice-feedback hidden">
            <div class="voice-animation">
                <div class="voice-wave"></div>
                <div class="voice-wave"></div>
                <div class="voice-wave"></div>
            </div>
            <p id="voiceStatus">Listening...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="utils.js"></script>
    <script src="api.js"></script>
    <script src="ai.js"></script>
    <script src="voice.js"></script>
    <script src="storage.js"></script>
    <script src="notifications.js"></script>
    <script src="maps.js"></script>
    <script src="script.js"></script>
    
    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>
